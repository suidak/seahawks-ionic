{"version":3,"sources":["../../src/pages/report-create/report-create.module.ts","../../src/pages/report-create/report-create.ts"],"names":[],"mappings":"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","file":"9.js","sourcesContent":["import { TranslateModule } from '@ngx-translate/core';\nimport { NgModule } from '@angular/core';\nimport { IonicPageModule } from 'ionic-angular';\nimport { ReportCreatePage } from './report-create';\n\n@NgModule({\n  declarations: [\n    ReportCreatePage,\n  ],\n  imports: [\n    IonicPageModule.forChild(ReportCreatePage),\n    TranslateModule.forChild()\n    \n  ],\n  exports: [\n    ReportCreatePage\n  ]\n})\nexport class ReportCreatePageModule {}\n\n\n\n// WEBPACK FOOTER //\n// ./src/pages/report-create/report-create.module.ts","import { NativeGeocoder, NativeGeocoderReverseResult, NativeGeocoderForwardResult } from '@ionic-native/native-geocoder';\nimport { FoundReports } from './../../providers/FoundReports/FoundReports';\nimport { reportAddModel } from './../../models/reportAddModel';\nimport { FoundReport } from './../../models/FoundReport';\nimport { Camera } from '@ionic-native/camera';\nimport { FormBuilder, FormGroup, Validators } from '@angular/forms';\nimport { Component, ViewChild } from '@angular/core';\nimport { IonicPage, NavController, NavParams, ViewController } from 'ionic-angular';\nimport { Geolocation } from '@ionic-native/geolocation';\n\n/**\n * Generated class for the ReportCreatePage page.\n *\n * See https://ionicframework.com/docs/components/#navigation for more info on\n * Ionic pages and navigation.\n */\n\n@IonicPage()\n@Component({\n  selector: 'page-report-create',\n  templateUrl: 'report-create.html',\n})\nexport class ReportCreatePage {\n  public file : File;\n  @ViewChild('fileInput') fileInput;\n  \n    isReadyToSave: boolean;\n    foundreport : reportAddModel;\n    item: any;\n    latx:number;\n    longy:number;\n    country:string;\n    city:string;\n    street:string;\n    zip:string;\n    form: FormGroup;\n    fileread: boolean=false;\n    imagepath:string;\n  constructor(public nativeGeocoder: NativeGeocoder, public geolocation: Geolocation, public navCtrl: NavController, public viewCtrl: ViewController, formBuilder: FormBuilder, public camera: Camera,public foundReports: FoundReports) {\n    this.form = formBuilder.group({\n      profilePic: ['',Validators.required],\n      title: ['', Validators.required],\n      description: ['',Validators.minLength(10)]\n    });\n    \n    // Watch the form for changes, and\n    this.form.valueChanges.subscribe((v) => {\n      this.isReadyToSave = this.form.valid;\n    });\n    this.geolocation.getCurrentPosition().then((resp) => {\n      this.latx=resp.coords.latitude;\n      this.longy=resp.coords.longitude;\n      console.log(this.latx);\n      this.nativeGeocoder.reverseGeocode(this.latx, this.longy)\n      .then(\n        (result: NativeGeocoderReverseResult) => console.log(JSON.stringify(result),this.country=result.countryName.toLocaleLowerCase(),\n        this.city=result.administrativeArea,this.street=result.thoroughfare,this.zip=result.postalCode\n    \n      )\n    \n      )\n      .catch((error: any) => console.log(error));\n    //resp.coords.latitude\n    // resp.coords.longitude\n   }).catch((error) => {\n     console.log('Error getting location', error);\n     this.latx=10.12;\n     this.longy=10.12;\n   });\n   \n  }\n\n  ionViewDidLoad() {\n    console.log('ionViewDidLoad ReportCreatePage');\n  }\n\n  getPicture() {\n    \n    if (Camera['installed']()) {\n      this.fileread=false;\n      this.camera.getPicture({\n        destinationType: this.camera.DestinationType.DATA_URL,\n        targetWidth: 96,\n        encodingType : this.camera.EncodingType.JPEG ,\n        mediaType : this.camera.MediaType.PICTURE ,\n        sourceType: 1,\n        targetHeight: 96\n      }).then((data) => {\n        this.form.patchValue({ 'profilePic': data });\n        this.file= this.form.controls['profilePic'].value ;  \n         \n\n        \n          \n      }, (err) => {\n        alert('Unable to take photo');\n      })\n    } else {\n      this.fileread=true;\n      this.fileInput.nativeElement.click();\n    }\n  }\n\n  processWebImage(event) {\n    if (this.fileread){\n      let reader = new FileReader();\n      reader.onload = (readerEvent) => {\n  \n        let imageData = (readerEvent.target as any).result;\n        this.form.patchValue({ 'profilePic': imageData });\n      };\n      this.file = (event.target.files[0]);\n  \n      reader.readAsDataURL(event.target.files[0]);\n    }\n  \n  }\n\n  getProfileImageStyle() {\n    return 'url(' +'data:image/jpg;base64,' +  this.form.controls['profilePic'].value + ')'\n  }\n\n  /**\n   * The user cancelled, so we dismiss without sending data back.\n   */\n  cancel() {\n    this.viewCtrl.dismiss();\n  }\n /**\n   * The user is done and wants to create the item, so return it\n   * back to the presenter.\n   */\n  done() {\n    if (!this.form.valid) { return; }\n    this.foundreport=this.form.value;\n    //geo\n  \n    /* let watch = this.geolocation.watchPosition();\n     watch.subscribe((data) => {\n      // data can be a set of coordinates, or an error (if an error occurred).\n      // data.coords.latitude\n      // data.coords.longitude\n     });*/\n    //geo\n    if(this.fileread==true){\n      console.log(\"file Sending FileReader\");\n      console.log(this.file);\n       this.foundReports.upload(this.form.controls['profilePic']).subscribe(\n         resp=> console.log(resp), \n         err=> {\n           console.log('sending dismiss event');\n           console.log(this.latx);\n           this.foundreport.profilePic=err.error.text;\n         this.foundreport.localisation = { city: this.city,street:this.street,country:this.country,zip:this.zip,x:this.latx,y:this.longy };\n         this.foundreport.reporterUser = {id:6};\n         this.viewCtrl.dismiss(this.foundreport);\n       });\n    }else{\n      console.log(\"data Sending Camera\");\n      //console.log(this.file);\n       this.foundReports.uploaddata(this.form.controls['profilePic'].value).subscribe(\n         resp=> {console.log(resp)\n          console.log(this.latx);\n          this.foundreport.profilePic=resp.text();\n        this.foundreport.localisation = { city: this.city,street:this.street,country:this.country,zip:this.zip,x:this.latx,y:this.longy };\n        this.foundreport.reporterUser = {id:6};\n        this.viewCtrl.dismiss(this.foundreport); \n        }\n          , \n         \n         err=> {\n           console.log('sending dismiss event');\n\n       });\n    }\n   \n    \n  }\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/pages/report-create/report-create.ts"],"sourceRoot":""}