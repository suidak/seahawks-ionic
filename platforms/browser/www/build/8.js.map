{"version":3,"sources":["../../src/pages/report-detail/report-detail.module.ts","../../node_modules/time-ago-pipe/time-ago-pipe.js","../../src/pages/report-detail/report-detail.ts"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;AAAsD;AACV;AACH;AACO;AACG;AAenD;IAAA;IAAqC,CAAC;IAAzB,sBAAsB;QAblC,+DAAQ,CAAC;YACR,YAAY,EAAE;gBACZ,wEAAgB;gBAChB,0DAAW;aACZ;YACD,OAAO,EAAE;gBACP,sEAAe,CAAC,QAAQ,CAAC,wEAAgB,CAAC;gBAC1C,4EAAe,CAAC,QAAQ,EAAE;aAC3B;YACD,OAAO,EAAC;gBACN,wEAAgB;aACjB;SACF,CAAC;OACW,sBAAsB,CAAG;IAAD,6BAAC;CAAA;AAAH;;;;;;;;;ACnBnC;AACA;AACA;AACA;AACA,4CAA4C,QAAQ;AACpD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,kDAAkD,+CAA+C,EAAE;AACnG,iBAAiB;AACjB;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,CAAC;AACD;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA,yC;;;;;;;;;;;;;;;;;;;;;;;;;AC1GmE;AAEN;AAEnB;AACe;AACA;AAEE;AAUvB;AAEpC;;;;;GAKG;AAOH;IASE,0BAAoB,aAA4B,EAAE,WAAwB,EAAS,UAAsB,EAAS,OAAsB,EAAS,SAAoB,EAAQ,YAA0B,EAAS,QAAkB;QAAlO,iBAgBC;QAhBmB,kBAAa,GAAb,aAAa,CAAe;QAAmC,eAAU,GAAV,UAAU,CAAY;QAAS,YAAO,GAAP,OAAO,CAAe;QAAS,cAAS,GAAT,SAAS,CAA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","file":"8.js","sourcesContent":["import { TranslateModule } from '@ngx-translate/core';\nimport { TimeAgoPipe } from 'time-ago-pipe';\nimport { NgModule } from '@angular/core';\nimport { IonicPageModule } from 'ionic-angular';\nimport { ReportDetailPage } from './report-detail';\n\n@NgModule({\n  declarations: [\n    ReportDetailPage,\n    TimeAgoPipe\n  ],\n  imports: [\n    IonicPageModule.forChild(ReportDetailPage),\n    TranslateModule.forChild()    \n  ],\n  exports:[\n    ReportDetailPage\n  ]\n})\nexport class ReportDetailPageModule {}\n\n\n\n// WEBPACK FOOTER //\n// ./src/pages/report-detail/report-detail.module.ts","\"use strict\";\r\nvar __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\r\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\r\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\r\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\r\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\r\n};\r\nvar __metadata = (this && this.__metadata) || function (k, v) {\r\n    if (typeof Reflect === \"object\" && typeof Reflect.metadata === \"function\") return Reflect.metadata(k, v);\r\n};\r\nvar core_1 = require(\"@angular/core\");\r\nvar TimeAgoPipe = (function () {\r\n    function TimeAgoPipe(changeDetectorRef, ngZone) {\r\n        this.changeDetectorRef = changeDetectorRef;\r\n        this.ngZone = ngZone;\r\n    }\r\n    TimeAgoPipe.prototype.transform = function (value) {\r\n        var _this = this;\r\n        this.removeTimer();\r\n        var d = new Date(value);\r\n        var now = new Date();\r\n        var seconds = Math.round(Math.abs((now.getTime() - d.getTime()) / 1000));\r\n        var timeToUpdate = this.getSecondsUntilUpdate(seconds) * 1000;\r\n        this.timer = this.ngZone.runOutsideAngular(function () {\r\n            if (typeof window !== 'undefined') {\r\n                return window.setTimeout(function () {\r\n                    _this.ngZone.run(function () { return _this.changeDetectorRef.markForCheck(); });\r\n                }, timeToUpdate);\r\n            }\r\n            return null;\r\n        });\r\n        var minutes = Math.round(Math.abs(seconds / 60));\r\n        var hours = Math.round(Math.abs(minutes / 60));\r\n        var days = Math.round(Math.abs(hours / 24));\r\n        var months = Math.round(Math.abs(days / 30.416));\r\n        var years = Math.round(Math.abs(days / 365));\r\n        if (seconds <= 45) {\r\n            return 'a few seconds ago';\r\n        }\r\n        else if (seconds <= 90) {\r\n            return 'a minute ago';\r\n        }\r\n        else if (minutes <= 45) {\r\n            return minutes + ' minutes ago';\r\n        }\r\n        else if (minutes <= 90) {\r\n            return 'an hour ago';\r\n        }\r\n        else if (hours <= 22) {\r\n            return hours + ' hours ago';\r\n        }\r\n        else if (hours <= 36) {\r\n            return 'a day ago';\r\n        }\r\n        else if (days <= 25) {\r\n            return days + ' days ago';\r\n        }\r\n        else if (days <= 45) {\r\n            return 'a month ago';\r\n        }\r\n        else if (days <= 345) {\r\n            return months + ' months ago';\r\n        }\r\n        else if (days <= 545) {\r\n            return 'a year ago';\r\n        }\r\n        else {\r\n            return years + ' years ago';\r\n        }\r\n    };\r\n    TimeAgoPipe.prototype.ngOnDestroy = function () {\r\n        this.removeTimer();\r\n    };\r\n    TimeAgoPipe.prototype.removeTimer = function () {\r\n        if (this.timer) {\r\n            window.clearTimeout(this.timer);\r\n            this.timer = null;\r\n        }\r\n    };\r\n    TimeAgoPipe.prototype.getSecondsUntilUpdate = function (seconds) {\r\n        var min = 60;\r\n        var hr = min * 60;\r\n        var day = hr * 24;\r\n        if (seconds < min) {\r\n            return 2;\r\n        }\r\n        else if (seconds < hr) {\r\n            return 30;\r\n        }\r\n        else if (seconds < day) {\r\n            return 300;\r\n        }\r\n        else {\r\n            return 3600;\r\n        }\r\n    };\r\n    return TimeAgoPipe;\r\n}());\r\nTimeAgoPipe = __decorate([\r\n    core_1.Pipe({\r\n        name: 'timeAgo',\r\n        pure: false\r\n    }),\r\n    __metadata(\"design:paramtypes\", [core_1.ChangeDetectorRef, core_1.NgZone])\r\n], TimeAgoPipe);\r\nexports.TimeAgoPipe = TimeAgoPipe;\r\n//# sourceMappingURL=time-ago-pipe.js.map\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/time-ago-pipe/time-ago-pipe.js\n// module id = 358\n// module chunks = 8 11","import { FormGroup, Validators,FormBuilder } from '@angular/forms';\nimport { reportReview } from './../../models/reportReview';\nimport { SocialSharing } from '@ionic-native/social-sharing';\nimport { FoundReport } from './../../models/FoundReport';\nimport { Component } from '@angular/core';\nimport { IonicPage, NavController, NavParams } from 'ionic-angular';\nimport { FoundReports } from '../../providers/providers';\nimport { Slides } from 'ionic-angular/components/slides/slides';\nimport { Platform } from 'ionic-angular/platform/platform';\nimport { reportAddModel } from '../../models/reportAddModel';\nimport {\n  GoogleMaps,\n  GoogleMap,\n  GoogleMapsEvent,\n  GoogleMapOptions,\n  CameraPosition,\n  MarkerOptions,\n  Marker\n } from '@ionic-native/google-maps';\n\n/**\n * Generated class for the ReportDetailPage page.\n *\n * See https://ionicframework.com/docs/components/#navigation for more info on\n * Ionic pages and navigation.\n */\n\n@IonicPage()\n@Component({\n  selector: 'page-report-detail',\n  templateUrl: 'report-detail.html',\n})\nexport class ReportDetailPage {\n  foundreport: reportAddModel;\n  map: GoogleMap;  \n  dir: string = 'ltr';\n  reviews: reportReview[];\n  form: FormGroup;\n  review : reportReview;\n  isReadyToSave: boolean;\n  \n  constructor(private socialSharing: SocialSharing, formBuilder: FormBuilder,private googleMaps: GoogleMaps, public navCtrl: NavController, public navParams: NavParams,public foundreports: FoundReports, public platform: Platform) {\n    if(navParams.get(\"item\")==null){\n       this.navCtrl.push('ListReportPage');\n    }\n    this.foundreport = navParams.get('item');\n    foundreports.queryReviews(this.foundreport.id).subscribe(resp=>{\n      this.reviews=resp;\n    })\n    this.dir = platform.dir();\n    this.form = formBuilder.group({\n      content: ['',Validators.minLength(10)]\n    });\n    this.form.valueChanges.subscribe((v) => {\n      this.isReadyToSave = this.form.valid;\n    });\n    \n  }\n\n  ionViewDidLoad() {\n    \n    /*this.socialSharing.canShareViaEmail().then(() => {\n     // Share via email\n    this.socialSharing.shareViaEmail('Body', 'Subject', ['kouertani25@yahoo.fr']).then(() => {\n      // Success!\n    }).catch(() => {\n      // Error! \n      console.log(\"not sent\");\n    });\n    }).catch(() => {\nconsole.log(\"no permissions\");\n});*/\n    \n    \n    this.loadMap();\n    console.log('ionViewDidLoad ReportDetailPage');\n  }\n  closereview(reviewid : number){\n    this.foundreports.rightAnswer(reviewid).subscribe(resp=>console.log(resp),err=>console.log(err));\n  }\n  addReview(){\n    if (!this.form.valid) { return; }\n    this.review=this.form.value;\n\n    this.review.reviewer={id:6};\n\n    this.review.foundReport = this.foundreport;\n\n   let   data = {\n      content : this.form.controls[\"content\"].value ,\n      reviewer : 6 ,\n      foundReport : this.foundreport.id \n     }\n    console.log(data);\n    this.foundreports.addReviewprovider(data).subscribe(rese => {\nconsole.log(\"yaatik sahha\") ;\n\n    },err =>{\n      console.log(\"me mchtech sahha\") ;\n    })\n  }\n  loadMap() {\n    \n        let mapOptions: GoogleMapOptions = {\n          camera: {\n            target: {\n              lat: this.foundreport.localisation.x,\n              lng:  this.foundreport.localisation.y\n            },\n            zoom: 12,\n            tilt: 30\n          }\n        };\n    \n        this.map = GoogleMaps.create('map_canvas', mapOptions);\n    \n        // Wait the MAP_READY before using any methods.\n        this.map.one(GoogleMapsEvent.MAP_READY)\n          .then(() => {\n            console.log('Map is ready!');\n    \n            // Now you can use all methods safely.\n            this.map.addMarker({\n                title: this.foundreport.title,\n                icon: 'green',\n                animation: 'DROP',\n                position: {\n                  lat: this.foundreport.localisation.x,\n                  lng:  this.foundreport.localisation.y\n                }\n              })\n              .then(marker => {\n                marker.on(GoogleMapsEvent.MARKER_CLICK)\n                  .subscribe(() => {\n                    console.log('clicked');\n                  });\n              });\n    \n          });\n      }\n    }\n\n\n\n\n\n// WEBPACK FOOTER //\n// ./src/pages/report-detail/report-detail.ts"],"sourceRoot":""}